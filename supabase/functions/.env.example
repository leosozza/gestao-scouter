# ============================================================================
# Configuração de Ambiente - Supabase Edge Functions
# ============================================================================
# 
# Este arquivo contém exemplos de todas as variáveis de ambiente necessárias
# para as Edge Functions de sincronização com TabuladorMax.
#
# Para configurar em produção:
# 1. Acesse o Dashboard do Supabase
# 2. Vá em Project Settings -> Edge Functions -> Secrets
# 3. Adicione cada variável abaixo com seus valores reais
# ============================================================================

# ----------------------------------------------------------------------------
# PROJETO GESTÃO SCOUTER (Local)
# ----------------------------------------------------------------------------

# URL base do projeto Supabase Gestão Scouter
SUPABASE_URL=https://your-gestao-project.supabase.co

# Service Role Key do Gestão Scouter (encontrada em Project Settings -> API)
# ATENÇÃO: Nunca commite esta chave no repositório!
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ----------------------------------------------------------------------------
# PROJETO TABULADORMAX (Remoto)
# ----------------------------------------------------------------------------

# URL base do projeto Supabase TabuladorMax
TABULADOR_URL=https://your-tabulador-project.supabase.co

# Service Role Key do TabuladorMax
# ATENÇÃO: Nunca commite esta chave no repositório!
TABULADOR_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Alias alternativo para compatibilidade com funções existentes
TABULADOR_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES DE SINCRONIZAÇÃO
# ----------------------------------------------------------------------------

# Tamanho do lote para sincronização (registros por requisição)
# Valores sugeridos: 100-1000 dependendo do tamanho dos registros
SYNC_BATCH_SIZE=500

# Número máximo de tentativas em caso de erro
# Após este número, o item será marcado como failed
SYNC_MAX_RETRIES=5

# Janela de tempo (ms) para ignorar loops de sincronização
# Registros sincronizados dentro desta janela não serão re-sincronizados
SYNC_LOOP_WINDOW_MS=60000

# Origem a ser ignorada para evitar loops (TabuladorMax|Gestao)
SYNC_IGNORE_SOURCE=TabuladorMax

# Timeout para requisições HTTP (ms)
SYNC_TIMEOUT_MS=30000

# ----------------------------------------------------------------------------
# CONFIGURAÇÕES DE LOGGING
# ----------------------------------------------------------------------------

# Nível de log (debug|info|warn|error)
LOG_LEVEL=info

# Habilitar logs detalhados de sincronização (true|false)
SYNC_DETAILED_LOGS=true

# ----------------------------------------------------------------------------
# CRON JOBS (Configurar no Supabase Dashboard)
# ----------------------------------------------------------------------------

# process-sync-queue: Processar fila a cada 1 minuto
# Schedule: */1 * * * *
# Function: process-sync-queue

# sync-tabulador: Sincronização incremental a cada 5 minutos
# Schedule: */5 * * * *
# Function: sync-tabulador

# ----------------------------------------------------------------------------
# EXEMPLOS DE COMO CONFIGURAR NO DASHBOARD
# ----------------------------------------------------------------------------
#
# 1. ADICIONAR SECRETS:
#    Dashboard -> Project Settings -> Edge Functions -> Secrets
#    Clique em "Add secret" e adicione cada variável
#
# 2. CRIAR CRON JOBS:
#    Dashboard -> Database -> Cron Jobs (ou via pg_cron extension)
#    OU
#    Use serviços externos como cron-job.org apontando para suas functions
#
# 3. TESTAR CONFIGURAÇÃO:
#    curl -X POST \
#      https://your-project.supabase.co/functions/v1/test-tabulador-connection \
#      -H "Authorization: Bearer YOUR_ANON_KEY"
#
# ============================================================================
